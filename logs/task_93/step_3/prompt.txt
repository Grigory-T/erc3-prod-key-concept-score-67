================================================================================
STEP 3
================================================================================
Started: 2025-12-10 00:16:37

Step 3: Check current user identity and permissions to ensure that the acting user (Nino Valente, id FphR_001) is allowed to read customer data associated with the identified account managers.
Approach: Call a who_am_i or equivalent identity function to confirm the current user context (id 'FphR_001', department 'Corporate Leadership', location 'HQ â€“ Italy'). Using the bound system roles and the company rules, verify that reading customer records from the CRM (customer table) does not require special roles (only mutations like CreateCustomer, UpdateCustomer, or ChangeDealPhase do). Confirm that there are no salary or confidential HR fields involved and that the access is read-only. Set a flag indicating whether the current user is permitted to list customers for the previously resolved employee_ids.
Expected Output: {"type":"object","properties":{"user_id":{"type":"string"},"department":{"type":"string"},"location":{"type":"string"},"can_read_customers":{"type":"boolean"},"denial_reason":{"type":["string","null"]}},"required":["user_id","department","location","can_read_customers","denial_reason"]}
