================================================================================
STEP 2
================================================================================
Started: 2025-12-09 20:41:39

Step 2: Resolve the employee referred to as "Fabbri Claudio" to a unique employee.id in the employee table.
Approach: Query the employee table by attempting an exact match on the full name field (employee.name = 'Fabbri Claudio'). If no exact match is found, progressively relax the search: use case-insensitive matching, then substring matching (normalized to lowercase and trimmed), and then fuzzy matching (e.g., fuzzy_compare, fuzzy_find_in_text) and SEMANTIC / LOGICAL matching to account for possible misspellings, name order variations (e.g., 'Claudio Fabbri'), or extra spaces. If multiple candidates are returned with similar scores, return all candidates with their match scores and mark multiple_matches = true to indicate ambiguity. If one clear best match is found above a reasonable confidence threshold, select that employee_id and mark found = true.
Expected Output: {"type":"object","properties":{"employee_name_input":{"type":"string"},"normalized_name":{"type":"string"},"employee_id":{"anyOf":[{"type":"string"},{"type":"null"}]},"found":{"type":"boolean"},"multiple_matches":{"type":"boolean"},"candidate_employees":{"type":"array","items":{"type":"object","properties":{"employee_id":{"type":"string"},"name":{"type":"string"},"match_score":{"type":"number"}},"required":["employee_id","name","match_score"]}}},"required":["employee_name_input","normalized_name","found","multiple_matches","candidate_employees"]}
