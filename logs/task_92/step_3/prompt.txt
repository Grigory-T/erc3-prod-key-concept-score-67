================================================================================
STEP 3
================================================================================
Started: 2025-12-10 00:18:52

Step 3: Determine whether the current user, Giovanni Rinaldi (employee id CjTb_001), has sufficient permissions to modify team roles and workloads for the identified project, following company permission policies.
Approach: Call the identity and authorization service (for example, a who_am_i function bound to the EmployeeRegistry and role system) to retrieve the current user record and their system_roles, department, and any project-specific leadership assignments. Using the project_id from step 1 and the employees from step 2, evaluate whether Giovanni is allowed to perform a ModifyTeamWorkload type action on that project according to the policy: allowed if user.id equals the project manager for that project or if user.system_roles intersects with the allowed roles set such as DepartmentLeader, ProjectAdmin, or ITAdmin, or if Giovanni is recognized as an executive with global project-operation rights based on his Corporate Leadership position. This check must be done after the project and employees are known, and it must result in an explicit boolean flag indicating whether the swap of roles and workloads can proceed.
Expected Output: {"type":"object","properties":{"user_id":{"type":"string"},"system_roles":{"type":"array","items":{"type":"string"}},"department":{"type":"string"},"is_executive":{"type":"boolean"},"project_id":{"type":["string","null"]},"is_project_lead_or_manager":{"type":"boolean"},"can_modify_team_workload":{"type":"boolean"}},"required":["user_id","system_roles","department","is_executive","can_modify_team_workload"]}
