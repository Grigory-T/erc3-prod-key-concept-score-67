================================================================================
STEP 4
================================================================================
Started: 2025-12-10 00:21:52

Step 4: Swap the roles and workloads (time_slice values) of Camilla Marchetti and Herrera Sonia within the team_member entries of the target hygienic tank lining development project to correct the earlier entry mistake.
Approach: Provided that step 3 confirms can_modify_team_workload is true and that step 1 and step 2 have identified a single target project_id and unique employee identifiers for Camilla and Sonia, start a database transaction on the team_member table. Select the team_member rows where project_id equals the selected project and employee_id equals selected_camilla_id, and separately where employee_id equals selected_sonia_id. Read and store each row's current role and time_slice values. If either team_member row does not exist, do not perform the swap and instead prepare an error result. If both exist, update the Camilla row to set role and time_slice to the values previously held by Sonia, and update the Sonia row to set role and time_slice to the values previously held by Camilla. Commit the transaction. This operation directly swaps both roles and workloads for the project, implementing the requested correction.
Expected Output: {"type":"object","properties":{"project_id":{"type":["string","null"]},"camilla_before":{"type":["object","null"],"properties":{"employee_id":{"type":"string"},"role":{"type":"string"},"time_slice":{"type":"number"}},"required":["employee_id","role","time_slice"]},"sonia_before":{"type":["object","null"],"properties":{"employee_id":{"type":"string"},"role":{"type":"string"},"time_slice":{"type":"number"}},"required":["employee_id","role","time_slice"]},"camilla_after":{"type":["object","null"],"properties":{"employee_id":{"type":"string"},"role":{"type":"string"},"time_slice":{"type":"number"}},"required":["employee_id","role","time_slice"]},"sonia_after":{"type":["object","null"],"properties":{"employee_id":{"type":"string"},"role":{"type":"string"},"time_slice":{"type":"number"}},"required":["employee_id","role","time_slice"]},"swap_executed":{"type":"boolean"},"error_message":{"type":["string","null"]}},"required":["swap_executed"]}
