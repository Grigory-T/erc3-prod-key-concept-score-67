================================================================================
STEP 5
================================================================================
Started: 2025-12-09 19:22:49

Step 5: Determine in which of the current user's projects the employee "Jan Schäfer" is also involved as a team member, and compile the final list.
Approach: If permission_granted from step 4 is true and target_employee_found from step 2 is true, query the team_member table for rows where employee_id equals target_employee_id and project_id is in my_project_ids from step 3. Use exact matching on employee_id and project_id; if any textual project names are used to double-check or present results, allow **FUZZY** and **SEMANTIC / LOGICAL** matching only for interpreting or de-duplicating names with possible typos but do not change the underlying exact project_id selection. Join the resulting project_ids with the project table to get project details. The final answer is the list of projects (id, name, and relevant metadata) that are in the intersection of: (a) projects where the current user is a team member and (b) projects where "Jan Schäfer" is a team member. If permissions are denied or the target employee is not found, return an empty list along with appropriate flags.
Expected Output: {"type":"object","properties":{"shared_projects":{"type":"array","items":{"type":"object","properties":{"project_id":{"type":"string"},"project_name":{"type":"string"},"status":{"type":"string"},"customer_id":{"type":["string","null"]}},"required":["project_id","project_name"]}},"shared_project_count":{"type":"integer"},"target_employee_found":{"type":"boolean"},"permission_granted":{"type":"boolean"}},"required":["shared_projects","shared_project_count","target_employee_found","permission_granted"]}
